#!/usr/bin/env node

/**
 * @file
 * @desc docsite client
 * @author liuyuanyangscript@gmail.com
 * @date  2018/05/26
 */

const fs = require('fs');
const path = require('path');
const fse = require('fs-extra');
const commander = require('commander');

const cacheDir = path.join(process.env.HOME, '.docsite/core-module');

require('ensure-module-latest')({
    moduleName: 'docsite-cli-core',
    cwd: cacheDir,
    registry: 'https://registry.npmjs.org/',
    beforeInstall(cwd) {
        // if (fs.existsSync(cwd)) {
        //     try {
        //         fse.removeSync(cwd);
        //     } catch (err) {
        //         throw Error(err);
        //     }
        // }
    },
}).then((modulePath) => {
    require(modulePath)(commander);
});
